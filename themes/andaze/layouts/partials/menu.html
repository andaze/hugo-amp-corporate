{{define "js"}}
  <script async custom-element="amp-script" src="https://cdn.ampproject.org/v0/amp-script-0.1.js"></script>
{{end}}
<header class="navbar p-fixed">
  <section class="navbar-section"></section>
  <div role="button" on="tap:header-sidebar.toggle" tabindex="0" class="pr-2 mobile-menu show-md sansserif">☰ MENU</div>
  <nav class="navbar-center hide-md">
    <ul itemscope itemtype="http://www.schema.org/SiteNavigationElement">
{{- $currentPageName := .Page.Params.menu.main.name}}
{{- $currentParent := .Page.Params.menu.main.parent}}
{{- range .Site.Menus.main.ByWeight}}
  {{- .Pre}}
      <li itemprop="name" class='nav-link {{if or (eq .Name $currentPageName) (eq .Identifier $currentParent)}}current{{end}}'>
        {{ if or (eq .Name "CAREERS") (eq .Name "採用情報") }}
          <a href='/job/{{ .Page.Lang }}' target="_blank">{{.Name}} <amp-img src="{{ `img/new-tab.png` | absURL }}" width="18" height="18" style="top:4px;" layout="fixed" ></amp-img> </a>
        {{ else }}
          <a itemprop="url" href='{{.URL}}'>{{ .Name }}</a>
        {{ end }}
      </li>
  {{- end}}
    </ul>
  </nav>
  <a href="#" on="tap:searchBox.show, AMP.setState({overflow: 'hidden'})" style="padding: 12px; background-color: white;">
    <svg xmlns="http://www.w3.org/2000/svg" width="17.997" height="17" viewBox="0 0 17.997 18">
      <path id="search-solid"
        d="M17.752,15.562l-3.5-3.5a.843.843,0,0,0-.6-.246h-.573a7.308,7.308,0,1,0-1.266,1.266v.573a.843.843,0,0,0,.246.6l3.5,3.5a.84.84,0,0,0,1.192,0l.995-.995A.848.848,0,0,0,17.752,15.562ZM7.312,11.811a4.5,4.5,0,1,1,4.5-4.5A4.5,4.5,0,0,1,7.312,11.811Z" />
    </svg>
  </a>
  <section class="navbar-section"></section>
</header>
<amp-sidebar id="header-sidebar" class="" layout="nodisplay" side="left">
  <div class="header-sidebar-title">
    <span class="sansserif">CONTENTS</span>
    <div class="btn items-start" role="button" aria-label="close" on="tap:header-sidebar.close" tabindex="0">✕</div>
  </div>
  <nav class="side-bar">
    <ul class="" itemscope itemtype="http://www.schema.org/SiteNavigationElement">
      {{- $counter := 0}}
      {{- range .Site.Menus.main.ByWeight }}
        {{- if .HasChildren}}
        {{- $counter = add $counter 1}}
        {{- $expand := printf "side_exp%d" $counter}}
        <li itemprop="name" class="nav-link">
          <amp-accordion disable-session-states animate>
            <section on='expand:AMP.setState({ {{$expand}}: 1});collapse:AMP.setState({ {{$expand}}: 0})'>
              {{.Pre}}<header class="nav-link">
                <div class="has-children">{{.Name}}
                <i [class]="'icon icon-arrow-' + ({{$expand}}==1 ? 'up' : 'down')" class="icon icon-arrow-down"></i>
                </div>
              </header>
              <div>
                {{- range .Children }}
                <li itemprop="name" class="nav-link pl2"><a itemprop="url" href="{{.URL}}" class="">{{.Name}}</a></li>
                {{- end }}
                </div>
            </section>
          </amp-accordion>
        </li>
        {{- else}}
          {{- .Pre}}
              <li itemprop="name" class='nav-link {{if eq .Name $currentPageName}}current{{end}}'>
                {{ if or (eq .Name "CAREERS") (eq .Name "採用情報") }} 
                  <a href='/job/{{ .Page.Lang }}' target="_blank">
                   {{.Name}} <amp-img src="{{ `img/new-tab.png` | absURL }}" width="18" height="18" style="top:4px;" layout="fixed" ></amp-img>
                  </a>
                {{ else }}
                  <a itemprop="url" href='{{.URL}}'>{{ .Name }}</a>
                {{ end }}
              </li>
        {{- end}}
      {{- end }}
    </ul>
  </nav>
</amp-sidebar>
<div id="searchBox" class="search-container" hidden>
  <div class="inner-search-wrap">
    <!-- <form class="sample-form" method="post" action-xhr="/documentation/examples/api/submit-form-input-text-xhr"
      target="_top"> -->
      <a href="#" class="search-close" on="tap:searchBox.hide">
        <svg id="close_black_24dp" xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24">
          <path id="Path_108" data-name="Path 108" d="M0,0H24V24H0Z" fill="none" />
          <path id="Path_109" data-name="Path 109"
            d="M19,6.41,17.59,5,12,10.59,6.41,5,5,6.41,10.59,12,5,17.59,6.41,19,12,13.41,17.59,19,19,17.59,13.41,12Z" />
        </svg>
      </a>
      <amp-script src="{{`js/search.js` | absURL }}" width="auto" height="500">
      <div class="search-form-field">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 17.997 18">
          <path id="search-solid"
            d="M17.752,15.562l-3.5-3.5a.843.843,0,0,0-.6-.246h-.573a7.308,7.308,0,1,0-1.266,1.266v.573a.843.843,0,0,0,.246.6l3.5,3.5a.84.84,0,0,0,1.192,0l.995-.995A.848.848,0,0,0,17.752,15.562ZM7.312,11.811a4.5,4.5,0,1,1,4.5-4.5A4.5,4.5,0,0,1,7.312,11.811Z" />
        </svg>
        <input type="text" id="search-input" name="name" placeholder="Search..." />
      </div>
      <input type="hidden" id="searchLang" name="searchLang" value="{{.Lang}}">
      <div class="search-menu-container search-menu-container-top" id="searchTitle"></div>
    </amp-script>
    <!-- </form> -->
  </div>
</div>